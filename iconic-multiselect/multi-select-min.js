"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*!
 * IconicMultiSelect v0.5.0
 * Licence:  MIT
 * (c) 2021 Sidney Wimart.
 */var cross='\n<svg\n  width="24"\n  height="24"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n>\n  <path\n    d="M6.2253 4.81108C5.83477 4.42056 5.20161 4.42056 4.81108 4.81108C4.42056 5.20161 4.42056 5.83477 4.81108 6.2253L10.5858 12L4.81114 17.7747C4.42062 18.1652 4.42062 18.7984 4.81114 19.1889C5.20167 19.5794 5.83483 19.5794 6.22535 19.1889L12 13.4142L17.7747 19.1889C18.1652 19.5794 18.7984 19.5794 19.1889 19.1889C19.5794 18.7984 19.5794 18.1652 19.1889 17.7747L13.4142 12L19.189 6.2253C19.5795 5.83477 19.5795 5.20161 19.189 4.81108C18.7985 4.42056 18.1653 4.42056 17.7748 4.81108L12 10.5858L6.2253 4.81108Z"\n    fill="currentColor"\n  />\n</svg>\n',scrollIntoView=function(e,t){var n=e.getBoundingClientRect(),i=t.getBoundingClientRect();n.top<i.bottom-t.offsetHeight||(e.scrollTop=t.clientHeight+(t.offsetTop-t.offsetHeight)),n.bottom>i.top+t.offsetHeight||(e.scrollTop=t.clientHeight+(t.offsetTop-t.offsetHeight)-(e.offsetHeight-(t.offsetHeight+(t.offsetHeight-t.clientHeight))))},IconicMultiSelect=function(){function e(t){var n=t.customCss,i=t.data,o=t.noData,s=t.noResults,l=t.placeholder,r=t.select,a=t.textField,c=t.valueField;_classCallCheck(this,e),_defineProperty(this,"customCss",void 0),_defineProperty(this,"data",void 0),_defineProperty(this,"domElements",{}),_defineProperty(this,"event",function(){}),_defineProperty(this,"noData",void 0),_defineProperty(this,"noResults",void 0),_defineProperty(this,"options",[]),_defineProperty(this,"placeholder",void 0),_defineProperty(this,"prefix","iconic"+Math.floor(1e3+9e3*Math.random())+"-"),_defineProperty(this,"selectContainer",void 0),_defineProperty(this,"selectedOptions",[]),_defineProperty(this,"textField",void 0),_defineProperty(this,"valueField",void 0),this.customCss=n,this.data=null!=i?i:[],this.noData=null!=o?o:"No data found.",this.noResults=null!=s?s:"No results found.",this.placeholder=null!=l?l:"Select...",this.selectContainer=document.querySelector(r),this.textField=null!=a?a:null,this.valueField=null!=c?c:null}return _createClass(e,[{key:"init",value:function(){if(!this.selectContainer||"SELECT"!==this.selectContainer.nodeName)throw new Error("The selector '".concat(element,"' did not select any valid select tag."));this.options=this._getDataFromSettings()||this._getDataFromSelectTag(),this._injectCss(),this._renderMultiselect(),this._renderOptionsList(),this.domElements={clear:document.querySelector(".".concat(this.prefix+"multiselect__clear-btn")),input:document.querySelector(".".concat(this.prefix+"multiselect__input")),optionsContainer:document.querySelector(".".concat(this.prefix+"multiselect__options")),optionsContainerList:document.querySelector(".".concat(this.prefix+"multiselect__options > ul")),options:{list:document.querySelectorAll(".".concat(this.prefix+"multiselect__options"," > ul > li")),find:function(e){for(var t=0;t<this.list.length;t++){var n=this.list[t];if(e(n))return n}},some:function(e){for(var t=0;t<this.list.length;t++){if(e(this.list[t]))return!0}return!1}}},this._enableEventListenners()}},{key:"subscribe",value:function(e){if("function"!=typeof e)throw new Error("parameter in the subscribe method is not a function");this.event=e}},{key:"_addOptionToList",value:function(e){var t=this,n='<span class="'.concat(this.prefix+"multiselect__selected",'" data-value="').concat(e.value,'">').concat(e.text,'<span class="').concat(this.prefix+"multiselect__remove-btn",'">').concat(cross,"</span></span>");this.domElements.input.insertAdjacentHTML("beforebegin",n),document.querySelector('span[data-value="'.concat(e.value,'"]')).firstElementChild.addEventListener("click",function(){var n=t.domElements.options.find(function(t){return t.dataset.value==e.value});t._handleOption(n)})}},{key:"_clearSelection",value:function(){for(var e=this,t=function(t){var n=e.selectedOptions[t],i=e.domElements.options.find(function(e){return e.dataset.value==n.value});i.classList.remove("".concat(e.prefix,"multiselect__options--selected")),e._removeOptionFromList(i.dataset.value)},n=0;n<this.selectedOptions.length;n++)t(n);this.selectedOptions=[],this._handleClearSelectionBtn(),this._handlePlaceholder(),this._dispatchEvent({action:"CLEAR_ALL_OPTIONS",selection:this.selectedOptions})}},{key:"_closeList",value:function(){this.domElements.input.value="",this.domElements.optionsContainer.classList.remove("visible"),this._filterOptions(""),this._removeAllArrowSelected()}},{key:"_dispatchEvent",value:function(e){this.event(e)}},{key:"_enableEventListenners",value:function(){var e=this;document.addEventListener("mouseup",function(t){var n=t.target;document.getElementById("iconic5656-multiselect").contains(n)||(e._filterOptions(""),e._closeList(),e._handlePlaceholder())}),this.domElements.clear.addEventListener("click",function(){e._clearSelection()});for(var t=0;t<this.domElements.options.list.length;t++){this.domElements.options.list[t].addEventListener("click",function(t){var n=t.target;e._handleOption(n),e._closeList()})}this.domElements.input.addEventListener("focus",function(){e.domElements.optionsContainer.classList.add("visible"),e.domElements.input.placeholder=""}),this.domElements.input.addEventListener("input",function(t){var n=t.target.value;e.domElements.options.list.length>0&&e._filterOptions(n)}),this.domElements.input.addEventListener("keydown",function(t){e._handleArrows(t),e._handleBackspace(t),e._handleEnter(t)})}},{key:"_filterOptions",value:function(e){var t=this.domElements.optionsContainer.classList.contains("visible"),n=e.toLowerCase();if(!t&&e.length>0&&this.domElements.optionsContainer.classList.add("visible"),this.domElements.options.list.length>0){for(var i=0;i<this.domElements.options.list.length;i++){var o=this.domElements.options.list[i];o.textContent.toLowerCase().substring(0,n.length)===n?this.domElements.optionsContainerList.appendChild(o):o.parentNode&&o.parentNode.removeChild(o)}var s=this.domElements.options.some(function(e){return e.textContent.toLowerCase().substring(0,n.length)===n});this._showNoResults(!s)}}},{key:"_getDataFromSelectTag",value:function(){for(var e=[],t=this.selectContainer.options,n=0;n<t.length;n++)e.push({text:t[n].text,value:t[n].value});return e}},{key:"_getDataFromSettings",value:function(){if(this.data.length>0&&this.valueField&&this.textField){var e="string"==typeof this.valueField,t="string"==typeof this.textField,n=[];if(!e||!t)throw new Error("textField and valueField must be of type string");for(var i=0;i<this.data.length;i++){var o=this.data[i];n.push({value:o[this.valueField],text:o[this.textField]})}return n}return null}},{key:"_handleArrows",value:function(e){if(40===e.keyCode||38===e.keyCode){var t=this.domElements.optionsContainer.classList.contains("visible"),n=document.querySelector(".".concat(this.prefix+"multiselect__options > ul"));if(t){var i=document.querySelector(".".concat(this.prefix,"multiselect__options ul li.arrow-selected")),o={ArrowUp:"previous",Up:"previous",ArrowDown:"next",Down:"next"};if(!i)return n.firstElementChild.classList.add("arrow-selected"),void n.firstElementChild.scrollIntoView();if(i.classList.remove("arrow-selected"),!(i=i[o[e.key]+"ElementSibling"]))return(i=n.children["next"===o[e.key]?0:n.children.length-1]).classList.add("arrow-selected"),void scrollIntoView(n,i);i.classList.add("arrow-selected"),scrollIntoView(n,i)}else this.domElements.optionsContainer.classList.add("visible"),n.firstElementChild.classList.add("arrow-selected"),n.firstElementChild.scrollIntoView()}}},{key:"_handleBackspace",value:function(e){if(8===e.keyCode&&""===e.target.value){var t=this.selectedOptions.length>0?this.selectedOptions[this.selectedOptions.length-1]:null;if(t){var n=document.querySelector('li[data-value="'.concat(t.value,'"]'));this._handleOption(n),0===this.selectedOptions.length&&this.domElements.optionsContainer.classList.remove("visible")}}}},{key:"_handleEnter",value:function(e){if(13===e.keyCode){var t=document.querySelector(".".concat(this.prefix,"multiselect__options ul li.arrow-selected"));t&&(this._handleOption(t),this._closeList())}}},{key:"_handleClearSelectionBtn",value:function(){this.selectedOptions.length>0?this.domElements.clear.style.display="flex":this.domElements.clear.style.display="none"}},{key:"_handleOption",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=0;n<this.selectedOptions.length;n++){if(this.selectedOptions[n].value==e.dataset.value)return e.classList.remove("".concat(this.prefix,"multiselect__options--selected")),this.selectedOptions.splice(n,1),this._removeOptionFromList(e.dataset.value),this._handleClearSelectionBtn(),this._handlePlaceholder(),t&&this._dispatchEvent({action:"REMOVE_OPTION",value:e.dataset.value,selection:this.selectedOptions})}for(var i=0;i<this.options.length;i++){var o=this.options[i];if(o.value==e.dataset.value)return e.classList.add("".concat(this.prefix,"multiselect__options--selected")),this.selectedOptions=[].concat(_toConsumableArray(this.selectedOptions),[o]),this._addOptionToList(o),this._handleClearSelectionBtn(),this._handlePlaceholder(),t&&this._dispatchEvent({action:"ADD_OPTION",value:e.dataset.value,selection:this.selectedOptions})}}},{key:"_handlePlaceholder",value:function(){this.selectedOptions.length>0?this.domElements.input.placeholder="":this.domElements.input.placeholder=this.placeholder}},{key:"_removeAllArrowSelected",value:function(){var e=this.domElements.options.find(function(e){return e.classList.contains("arrow-selected")});e&&e.classList.remove("arrow-selected")}},{key:"_removeOptionFromList",value:function(e){var t=document.querySelector('span[data-value="'.concat(e,'"]'));t&&t.parentNode&&t.parentNode.removeChild(t)}},{key:"_renderOptionsList",value:function(){var e='\n        <div class="'.concat(this.prefix,'multiselect__options">\n          <ul>\n          ').concat(this.options.length>0?this.options.map(function(e){return'\n              <li data-value="'.concat(e.value,'">').concat(e.text,"</li>\n            ")}).join(""):"","\n          ").concat(this._showNoData(0===this.options.length),"\n          </ul>\n        </div>\n      ");document.querySelector(".".concat(this.prefix+"multiselect__container")).insertAdjacentHTML("beforeend",e)}},{key:"_renderMultiselect",value:function(){this.selectContainer.style.display="none";var e='\n      <div id="iconic5656-multiselect" class="'.concat(this.prefix+"multiselect__container",'">\n        <div class="').concat(this.prefix+"multiselect__wrapper",'">\n          <input class="').concat(this.prefix+"multiselect__input",'" placeholder="').concat(this.placeholder,'" />\n        </div>\n        <span style="display: none;" class="').concat(this.prefix+"multiselect__clear-btn",'">').concat(cross,"</span>\n      </div>\n    ");this.selectContainer.insertAdjacentHTML("afterend",e)}},{key:"_showNoData",value:function(e){return e?'<p class="'.concat(this.prefix,'multiselect__options--no-data">').concat(this.noData,"</p>"):""}},{key:"_showNoResults",value:function(e){var t=document.querySelector(".".concat(this.prefix,"multiselect__options--no-results"));if(e){var n='<p class="'.concat(this.prefix,'multiselect__options--no-results">').concat(this.noResults,"</p>");!t&&this.domElements.optionsContainerList.insertAdjacentHTML("beforeend",n)}else t&&t.parentNode&&t.parentNode.removeChild(t)}},{key:"_injectCss",value:function(){var e="\n      <style>\n        .".concat(this.prefix,"multiselect__container {\n          -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n          background-color: #fff;\n          border-radius: 2px;\n          -webkit-box-shadow: 0 1px 3px 0 #d1d1d2, 0 0 0 1px #d1d1d2;\n                  box-shadow: 0 1px 3px 0 #d1d1d2, 0 0 0 1px #d1d1d2;\n          -webkit-box-sizing: border-box;\n                  box-sizing: border-box;\n          display: -webkit-box;\n          display: -ms-flexbox;\n          display: flex;\n          font-family: Arial,Helvetica,sans-serif;\n          min-height: 36px;\n          padding: 4px 8px 0 8px;\n          position: relative;\n          width: 354px;\n        }\n\n        .").concat(this.prefix,"multiselect__container:after {\n          content:'';\n          min-height:inherit;\n          font-size:0;\n        }\n\n        .").concat(this.prefix,"multiselect__container > * {\n          color: #656565;\n          font-size: 14px;\n        }\n\n        .").concat(this.prefix+"multiselect__wrapper"," {\n          display: -webkit-box;\n          display: -ms-flexbox;\n          display: flex;\n          -ms-flex-wrap: wrap;\n              flex-wrap: wrap;\n          height: 100%;\n          width: 100%;\n        }\n\n        .").concat(this.prefix,"multiselect__clear-btn {\n           cursor: pointer;\n           align-items: center;\n           margin-bottom: 4px;\n           margin-left: 4px;\n        }\n\n        .").concat(this.prefix,"multiselect__clear-btn svg {\n          height: 20px;\n          width: 20px;\n        }\n\n        .").concat(this.prefix,"multiselect__options {\n          background-color: #f6f6f6;\n          border-radius: 2px;\n          left: 0;\n          max-height: 0;\n          overflow: hidden;\n          position: absolute;\n          top: calc(100% + 3px);\n          width: 100%;\n          opacity: 0;\n          transition: max-height 0.1s ease;\n        }\n\n        .").concat(this.prefix,"multiselect__options.visible {\n          max-height: 128px;\n          -webkit-box-shadow: 0 1px 3px 0 #d1d1d2, 0 0 0 1px #d1d1d2;\n          box-shadow: 0 1px 3px 0 #d1d1d2, 0 0 0 1px #d1d1d2;\n          opacity: 1;\n          transition: max-height 0.2s ease;\n        }\n\n\n        .").concat(this.prefix,"multiselect__options ul {\n          list-style: none;\n          margin: 0;\n          padding: 2px 0;\n          max-height: 120px;\n          overflow: auto;\n        }\n\n        .").concat(this.prefix,"multiselect__options ul li {\n          cursor: pointer;\n          padding: 4px 8px;\n        }\n\n        .").concat(this.prefix,"multiselect__options ul p.").concat(this.prefix,"multiselect__options--no-results, \n        .").concat(this.prefix,"multiselect__options ul p.").concat(this.prefix,"multiselect__options--no-data {\n          margin: 0;\n          padding: 8px;\n          text-align: center;\n        }\n\n        .").concat(this.prefix,"multiselect__options ul li.").concat(this.prefix,"multiselect__options--selected {\n          background-color: #ff6358;\n          color: #fff;\n        }\n\n        .").concat(this.prefix,"multiselect__options ul li.").concat(this.prefix,"multiselect__options--selected:hover {\n          background-color: #eb5b51;\n        }\n\n        .").concat(this.prefix,"multiselect__options ul li:hover {\n          background-color: #dedede;\n        }\n\n        .").concat(this.prefix,"multiselect__options ul li.arrow-selected {\n          border: 2px solid rgba(101, 101, 101, 0.5);\n        }\n\n        .").concat(this.prefix,"multiselect__selected {\n          background-color: #656565;\n          border-radius: 2px;\n          color: #fff;\n          margin-bottom: 4px;\n          margin-right: 4px;\n          padding: 4px 8px;\n          display: -webkit-box;\n          display: -ms-flexbox;\n          display: flex;\n          -webkit-box-align: center;\n              -ms-flex-align: center;\n                  align-items: center;\n        }\n\n        .").concat(this.prefix,"multiselect__selected .").concat(this.prefix,"multiselect__remove-btn {\n          cursor: pointer;\n          display: flex;\n          margin-left: 6px;\n        }\n\n        .").concat(this.prefix,"multiselect__selected .").concat(this.prefix,"multiselect__remove-btn svg {\n          height: 16px;\n          width: 16px;\n        }\n\n        .").concat(this.prefix,"multiselect__input {\n          border: none;\n          -ms-flex-preferred-size: 40px;\n              flex-basis: 40px;\n          -webkit-box-flex: 1;\n              -ms-flex-positive: 1;\n                  flex-grow: 1;\n          height: 24px;        \n          margin-bottom: 4px;\n          min-width: 40px;\n          outline: none;      \n        }\n      </style>\n      ");this.customCss||document.querySelector("head").insertAdjacentHTML("beforeend",e),this.customCss&&(this.prefix="")}}]),e}();