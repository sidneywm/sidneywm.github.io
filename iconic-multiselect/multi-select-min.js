"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,i=new Array(t);s<t;s++)i[s]=e[s];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,s){return t&&_defineProperties(e.prototype,t),s&&_defineProperties(e,s),e}function _classPrivateMethodGet(e,t,s){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return s}function _classPrivateFieldGet(e,t){return _classApplyDescriptorGet(e,_classExtractFieldDescriptor(e,t,"get"))}function _classApplyDescriptorGet(e,t){return t.get?t.get.call(e):t.value}function _classPrivateFieldSet(e,t,s){return _classApplyDescriptorSet(e,_classExtractFieldDescriptor(e,t,"set"),s),s}function _classExtractFieldDescriptor(e,t,s){if(!t.has(e))throw new TypeError("attempted to "+s+" private field on non-instance");return t.get(e)}function _classApplyDescriptorSet(e,t,s){if(t.set)t.set.call(e,s);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=s}}var _data=new WeakMap,_domElements=new WeakMap,_event=new WeakMap,_itemTemplate=new WeakMap,_multiselect=new WeakMap,_noData=new WeakMap,_noResults=new WeakMap,_options=new WeakMap,_placeholder=new WeakMap,_selectContainer=new WeakMap,_selectedOptions=new WeakMap,_tagTemplate=new WeakMap,_textField=new WeakMap,_valueField=new WeakMap,_cross=new WeakMap,_addOptionToList=new WeakSet,_clearSelection=new WeakSet,_closeList=new WeakSet,_dispatchEvent=new WeakSet,_enableEventListenners=new WeakSet,_filterOptions=new WeakSet,_generateId=new WeakSet,_getDataFromSelectTag=new WeakSet,_getDataFromSettings=new WeakSet,_handleArrows=new WeakSet,_handleBackspace=new WeakSet,_handleClearSelectionBtn=new WeakSet,_handleEnter=new WeakSet,_handleOption=new WeakSet,_handlePlaceholder=new WeakSet,_processTemplate=new WeakSet,_removeAllArrowSelected=new WeakSet,_removeOptionFromList=new WeakSet,_renderOptionsList=new WeakSet,_renderMultiselect=new WeakSet,_scrollIntoView=new WeakSet,_showNoData=new WeakSet,_showNoResults=new WeakSet,IconicMultiSelect=function(){function e(t){var s=t.data,i=t.itemTemplate,l=t.noData,a=t.noResults,n=t.placeholder,r=t.select,o=t.tagTemplate,c=t.textField,d=t.valueField;_classCallCheck(this,e),_showNoResults.add(this),_showNoData.add(this),_scrollIntoView.add(this),_renderMultiselect.add(this),_renderOptionsList.add(this),_removeOptionFromList.add(this),_removeAllArrowSelected.add(this),_processTemplate.add(this),_handlePlaceholder.add(this),_handleOption.add(this),_handleEnter.add(this),_handleClearSelectionBtn.add(this),_handleBackspace.add(this),_handleArrows.add(this),_getDataFromSettings.add(this),_getDataFromSelectTag.add(this),_generateId.add(this),_filterOptions.add(this),_enableEventListenners.add(this),_dispatchEvent.add(this),_closeList.add(this),_clearSelection.add(this),_addOptionToList.add(this),_data.set(this,{writable:!0,value:void 0}),_domElements.set(this,{writable:!0,value:void 0}),_event.set(this,{writable:!0,value:function(){}}),_itemTemplate.set(this,{writable:!0,value:void 0}),_multiselect.set(this,{writable:!0,value:void 0}),_noData.set(this,{writable:!0,value:void 0}),_noResults.set(this,{writable:!0,value:void 0}),_options.set(this,{writable:!0,value:[]}),_placeholder.set(this,{writable:!0,value:void 0}),_selectContainer.set(this,{writable:!0,value:void 0}),_selectedOptions.set(this,{writable:!0,value:[]}),_tagTemplate.set(this,{writable:!0,value:void 0}),_textField.set(this,{writable:!0,value:void 0}),_valueField.set(this,{writable:!0,value:void 0}),_cross.set(this,{writable:!0,value:'\n    <svg\n      width="24"\n      height="24"\n      viewBox="0 0 24 24"\n      fill="none"\n      xmlns="http://www.w3.org/2000/svg"\n    >\n      <path\n        d="M6.2253 4.81108C5.83477 4.42056 5.20161 4.42056 4.81108 4.81108C4.42056 5.20161 4.42056 5.83477 4.81108 6.2253L10.5858 12L4.81114 17.7747C4.42062 18.1652 4.42062 18.7984 4.81114 19.1889C5.20167 19.5794 5.83483 19.5794 6.22535 19.1889L12 13.4142L17.7747 19.1889C18.1652 19.5794 18.7984 19.5794 19.1889 19.1889C19.5794 18.7984 19.5794 18.1652 19.1889 17.7747L13.4142 12L19.189 6.2253C19.5795 5.83477 19.5795 5.20161 19.189 4.81108C18.7985 4.42056 18.1653 4.42056 17.7748 4.81108L12 10.5858L6.2253 4.81108Z"\n        fill="currentColor"\n      />\n    </svg>\n    '}),_classPrivateFieldSet(this,_data,null!=s?s:[]),_classPrivateFieldSet(this,_itemTemplate,null!=i?i:null),_classPrivateFieldSet(this,_noData,null!=l?l:"No data found."),_classPrivateFieldSet(this,_noResults,null!=a?a:"No results found."),_classPrivateFieldSet(this,_placeholder,null!=n?n:"Select..."),_classPrivateFieldSet(this,_selectContainer,document.querySelector(r)),_classPrivateFieldSet(this,_tagTemplate,null!=o?o:null),_classPrivateFieldSet(this,_textField,null!=c?c:null),_classPrivateFieldSet(this,_valueField,null!=d?d:null)}return _createClass(e,[{key:"init",value:function(){if(!_classPrivateFieldGet(this,_selectContainer)||"SELECT"!==_classPrivateFieldGet(this,_selectContainer).nodeName)throw new Error("The selector '".concat(element,"' did not select any valid select tag."));if(_classPrivateFieldGet(this,_itemTemplate)&&0===_classPrivateFieldGet(this,_data).length)throw new Error("itemTemplate must be initialized with data from the component settings");_classPrivateFieldSet(this,_options,_classPrivateFieldGet(this,_data).length>0?_classPrivateMethodGet(this,_getDataFromSettings,_getDataFromSettings2).call(this):_classPrivateMethodGet(this,_getDataFromSelectTag,_getDataFromSelectTag2).call(this)),_classPrivateMethodGet(this,_renderMultiselect,_renderMultiselect2).call(this),_classPrivateMethodGet(this,_renderOptionsList,_renderOptionsList2).call(this),_classPrivateFieldSet(this,_domElements,{clear:_classPrivateFieldGet(this,_multiselect).querySelector(".multiselect__clear-btn"),input:_classPrivateFieldGet(this,_multiselect).querySelector(".multiselect__input"),optionsContainer:_classPrivateFieldGet(this,_multiselect).querySelector(".multiselect__options"),optionsContainerList:_classPrivateFieldGet(this,_multiselect).querySelector(".multiselect__options > ul"),options:{list:_classPrivateFieldGet(this,_multiselect).querySelectorAll(".multiselect__options > ul > li"),find:function(e){for(var t=0;t<this.list.length;t++){var s=this.list[t];if(e(s))return s}},some:function(e){for(var t=0;t<this.list.length;t++){if(e(this.list[t],t))return!0}return!1}}}),_classPrivateMethodGet(this,_enableEventListenners,_enableEventListenners2).call(this)}},{key:"subscribe",value:function(e){if("function"!=typeof e)throw new Error("parameter in the subscribe method is not a function");_classPrivateFieldSet(this,_event,e)}}]),e}();function _addOptionToList2(e,t){var s=this,i='<span class="multiselect__selected" data-value="'.concat(e.value,'">').concat(_classPrivateFieldGet(this,_tagTemplate)?_classPrivateMethodGet(this,_processTemplate,_processTemplate2).call(this,_classPrivateFieldGet(this,_tagTemplate),t):e.text,'<span class="multiselect__remove-btn">').concat(_classPrivateFieldGet(this,_cross),"</span></span>");_classPrivateFieldGet(this,_domElements).input.insertAdjacentHTML("beforebegin",i),_classPrivateFieldGet(this,_multiselect).querySelector('span[data-value="'.concat(e.value,'"]')).lastElementChild.addEventListener("click",function(){var t=_classPrivateFieldGet(s,_domElements).options.find(function(t){return t.dataset.value==e.value});_classPrivateMethodGet(s,_handleOption,_handleOption2).call(s,t)})}function _clearSelection2(){for(var e=this,t=function(t){var s=_classPrivateFieldGet(e,_selectedOptions)[t],i=_classPrivateFieldGet(e,_domElements).options.find(function(e){return e.dataset.value==s.value});i.classList.remove("multiselect__options--selected"),_classPrivateMethodGet(e,_removeOptionFromList,_removeOptionFromList2).call(e,i.dataset.value)},s=0;s<_classPrivateFieldGet(this,_selectedOptions).length;s++)t(s);_classPrivateFieldSet(this,_selectedOptions,[]),_classPrivateMethodGet(this,_handleClearSelectionBtn,_handleClearSelectionBtn2).call(this),_classPrivateMethodGet(this,_handlePlaceholder,_handlePlaceholder2).call(this),_classPrivateMethodGet(this,_dispatchEvent,_dispatchEvent2).call(this,{action:"CLEAR_ALL_OPTIONS",selection:_classPrivateFieldGet(this,_selectedOptions)})}function _closeList2(){_classPrivateFieldGet(this,_domElements).input.value="",_classPrivateFieldGet(this,_domElements).optionsContainer.classList.remove("visible"),_classPrivateMethodGet(this,_filterOptions,_filterOptions2).call(this,""),_classPrivateMethodGet(this,_removeAllArrowSelected,_removeAllArrowSelected2).call(this)}function _dispatchEvent2(e){_classPrivateFieldGet(this,_event).call(this,e)}function _enableEventListenners2(){var e=this;document.addEventListener("mouseup",function(t){var s=t.target;_classPrivateFieldGet(e,_multiselect).contains(s)||(_classPrivateMethodGet(e,_filterOptions,_filterOptions2).call(e,""),_classPrivateMethodGet(e,_closeList,_closeList2).call(e),_classPrivateMethodGet(e,_handlePlaceholder,_handlePlaceholder2).call(e))}),_classPrivateFieldGet(this,_domElements).clear.addEventListener("click",function(){_classPrivateMethodGet(e,_clearSelection,_clearSelection2).call(e)});for(var t=0;t<_classPrivateFieldGet(this,_domElements).options.list.length;t++){_classPrivateFieldGet(this,_domElements).options.list[t].addEventListener("click",function(t){var s=t.target;_classPrivateMethodGet(e,_handleOption,_handleOption2).call(e,s),_classPrivateMethodGet(e,_closeList,_closeList2).call(e)})}_classPrivateFieldGet(this,_domElements).input.addEventListener("focus",function(){_classPrivateFieldGet(e,_domElements).optionsContainer.classList.add("visible"),_classPrivateFieldGet(e,_domElements).input.placeholder=""}),_classPrivateFieldGet(this,_domElements).input.addEventListener("input",function(t){var s=t.target.value;_classPrivateFieldGet(e,_domElements).options.list.length>0&&_classPrivateMethodGet(e,_filterOptions,_filterOptions2).call(e,s)}),_classPrivateFieldGet(this,_domElements).input.addEventListener("keydown",function(t){_classPrivateMethodGet(e,_handleArrows,_handleArrows2).call(e,t),_classPrivateMethodGet(e,_handleBackspace,_handleBackspace2).call(e,t),_classPrivateMethodGet(e,_handleEnter,_handleEnter2).call(e,t)})}function _filterOptions2(e){var t=this,s=_classPrivateFieldGet(this,_domElements).optionsContainer.classList.contains("visible"),i=e.toLowerCase();if(!s&&e.length>0&&_classPrivateFieldGet(this,_domElements).optionsContainer.classList.add("visible"),_classPrivateFieldGet(this,_domElements).options.list.length>0){for(var l=0;l<_classPrivateFieldGet(this,_domElements).options.list.length;l++){var a=_classPrivateFieldGet(this,_domElements).options.list[l];(_classPrivateFieldGet(this,_itemTemplate)?_classPrivateFieldGet(this,_data)[l][_classPrivateFieldGet(this,_textField)]:a.textContent).toLowerCase().substring(0,i.length)===i?_classPrivateFieldGet(this,_domElements).optionsContainerList.appendChild(a):a.parentNode&&a.parentNode.removeChild(a)}var n=_classPrivateFieldGet(this,_domElements).options.some(function(e,s){return(_classPrivateFieldGet(t,_itemTemplate)?_classPrivateFieldGet(t,_data)[s][_classPrivateFieldGet(t,_textField)]:e.textContent).toLowerCase().substring(0,i.length)===i});_classPrivateMethodGet(this,_showNoResults,_showNoResults2).call(this,!n)}}function _generateId2(e){for(var t="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=s.length,l=0;l<e;l++)t+=s.charAt(Math.floor(Math.random()*i));return t}function _getDataFromSelectTag2(){for(var e=[],t=_classPrivateFieldGet(this,_selectContainer).options,s=0;s<t.length;s++)e.push({text:t[s].text,value:t[s].value});return e}function _getDataFromSettings2(){if(_classPrivateFieldGet(this,_data).length>0&&_classPrivateFieldGet(this,_valueField)&&_classPrivateFieldGet(this,_textField)){var e="string"==typeof _classPrivateFieldGet(this,_valueField),t="string"==typeof _classPrivateFieldGet(this,_textField),s=[];if(!e||!t)throw new Error("textField and valueField must be of type string");for(var i=0;i<_classPrivateFieldGet(this,_data).length;i++){var l=_classPrivateFieldGet(this,_data)[i];s.push({value:l[_classPrivateFieldGet(this,_valueField)],text:l[_classPrivateFieldGet(this,_textField)]})}return s}return null}function _handleArrows2(e){if(40===e.keyCode||38===e.keyCode){e.preventDefault();var t=_classPrivateFieldGet(this,_domElements).optionsContainer.classList.contains("visible"),s=_classPrivateFieldGet(this,_multiselect).querySelector(".multiselect__options > ul");if(t){var i=_classPrivateFieldGet(this,_multiselect).querySelector(".multiselect__options ul li.arrow-selected"),l={ArrowUp:"previous",Up:"previous",ArrowDown:"next",Down:"next"};if(!i)return s.firstElementChild.classList.add("arrow-selected"),void s.firstElementChild.scrollIntoView(!1);if(i.classList.remove("arrow-selected"),!(i=i[l[e.key]+"ElementSibling"]))return(i=s.children["next"===l[e.key]?0:s.children.length-1]).classList.add("arrow-selected"),void _classPrivateMethodGet(this,_scrollIntoView,_scrollIntoView2).call(this,s,i);i.classList.add("arrow-selected"),_classPrivateMethodGet(this,_scrollIntoView,_scrollIntoView2).call(this,s,i)}else _classPrivateFieldGet(this,_domElements).optionsContainer.classList.add("visible"),s.firstElementChild.classList.add("arrow-selected"),s.firstElementChild.scrollIntoView(!1)}}function _handleBackspace2(e){if(8===e.keyCode&&""===e.target.value){var t=_classPrivateFieldGet(this,_selectedOptions).length>0?_classPrivateFieldGet(this,_selectedOptions)[_classPrivateFieldGet(this,_selectedOptions).length-1]:null;if(t){var s=_classPrivateFieldGet(this,_multiselect).querySelector('li[data-value="'.concat(t.value,'"]'));_classPrivateMethodGet(this,_handleOption,_handleOption2).call(this,s),0===_classPrivateFieldGet(this,_selectedOptions).length&&_classPrivateFieldGet(this,_domElements).optionsContainer.classList.remove("visible")}}}function _handleClearSelectionBtn2(){_classPrivateFieldGet(this,_selectedOptions).length>0?_classPrivateFieldGet(this,_domElements).clear.style.display="flex":_classPrivateFieldGet(this,_domElements).clear.style.display="none"}function _handleEnter2(e){if(13===e.keyCode){var t=_classPrivateFieldGet(this,_multiselect).querySelector(".multiselect__options ul li.arrow-selected");t&&(_classPrivateMethodGet(this,_handleOption,_handleOption2).call(this,t),_classPrivateMethodGet(this,_closeList,_closeList2).call(this))}}function _handleOption2(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=0;s<_classPrivateFieldGet(this,_selectedOptions).length;s++){if(_classPrivateFieldGet(this,_selectedOptions)[s].value==e.dataset.value)return e.classList.remove("multiselect__options--selected"),_classPrivateFieldGet(this,_selectedOptions).splice(s,1),_classPrivateMethodGet(this,_removeOptionFromList,_removeOptionFromList2).call(this,e.dataset.value),_classPrivateMethodGet(this,_handleClearSelectionBtn,_handleClearSelectionBtn2).call(this),_classPrivateMethodGet(this,_handlePlaceholder,_handlePlaceholder2).call(this),t&&_classPrivateMethodGet(this,_dispatchEvent,_dispatchEvent2).call(this,{action:"REMOVE_OPTION",value:e.dataset.value,selection:_classPrivateFieldGet(this,_selectedOptions)})}for(var i=0;i<_classPrivateFieldGet(this,_options).length;i++){var l=_classPrivateFieldGet(this,_options)[i];if(l.value==e.dataset.value)return e.classList.add("multiselect__options--selected"),_classPrivateFieldSet(this,_selectedOptions,[].concat(_toConsumableArray(_classPrivateFieldGet(this,_selectedOptions)),[l])),_classPrivateMethodGet(this,_addOptionToList,_addOptionToList2).call(this,l,i),_classPrivateMethodGet(this,_handleClearSelectionBtn,_handleClearSelectionBtn2).call(this),_classPrivateMethodGet(this,_handlePlaceholder,_handlePlaceholder2).call(this),t&&_classPrivateMethodGet(this,_dispatchEvent,_dispatchEvent2).call(this,{action:"ADD_OPTION",value:e.dataset.value,selection:_classPrivateFieldGet(this,_selectedOptions)})}}function _handlePlaceholder2(){_classPrivateFieldGet(this,_selectedOptions).length>0?_classPrivateFieldGet(this,_domElements).input.placeholder="":_classPrivateFieldGet(this,_domElements).input.placeholder=_classPrivateFieldGet(this,_placeholder)}function _processTemplate2(e,t){for(var s=e,i=e.match(/\$\{(\w+)\}/g).map(function(e){return e.replace(/\$\{|\}/g,"")}),l=0;l<i.length;l++){var a,n=i[l];s=s.replace("${".concat(n,"}"),null!==(a=_classPrivateFieldGet(this,_data)[t][n])&&void 0!==a?a:"")}return s}function _removeAllArrowSelected2(){var e=_classPrivateFieldGet(this,_domElements).options.find(function(e){return e.classList.contains("arrow-selected")});e&&e.classList.remove("arrow-selected")}function _removeOptionFromList2(e){var t=_classPrivateFieldGet(this,_multiselect).querySelector('span[data-value="'.concat(e,'"]'));t&&t.parentNode&&t.parentNode.removeChild(t)}function _renderOptionsList2(){var e=this,t='\n        <div class="multiselect__options">\n          <ul>\n          '.concat(_classPrivateFieldGet(this,_options).length>0&&!_classPrivateFieldGet(this,_itemTemplate)?_classPrivateFieldGet(this,_options).map(function(e){return'\n              <li data-value="'.concat(e.value,'">').concat(e.text,"</li>\n            ")}).join(""):"","\n\n          ").concat(_classPrivateFieldGet(this,_options).length>0&&_classPrivateFieldGet(this,_itemTemplate)?_classPrivateFieldGet(this,_options).map(function(t,s){return'\n              <li data-value="'.concat(t.value,'">').concat(_classPrivateMethodGet(e,_processTemplate,_processTemplate2).call(e,_classPrivateFieldGet(e,_itemTemplate),s),"</li>\n            ")}).join(""):"","\n          ").concat(_classPrivateMethodGet(this,_showNoData,_showNoData2).call(this,0===_classPrivateFieldGet(this,_options).length),"\n          </ul>\n        </div>\n      ");_classPrivateFieldGet(this,_multiselect).insertAdjacentHTML("beforeend",t)}function _renderMultiselect2(){_classPrivateFieldGet(this,_selectContainer).style.display="none";var e="iconic-"+_classPrivateMethodGet(this,_generateId,_generateId2).call(this,20),t='\n      <div id="'.concat(e,'" class="multiselect__container">\n        <div class="multiselect__wrapper">\n          <input class="multiselect__input" placeholder="').concat(_classPrivateFieldGet(this,_placeholder),'" />\n        </div>\n        <span style="display: none;" class="multiselect__clear-btn">').concat(_classPrivateFieldGet(this,_cross),"</span>\n      </div>\n    ");_classPrivateFieldGet(this,_selectContainer).insertAdjacentHTML("afterend",t),_classPrivateFieldSet(this,_multiselect,document.querySelector("#".concat(e)))}function _scrollIntoView2(e,t){var s=e.getBoundingClientRect(),i=t.getBoundingClientRect();s.top<i.bottom-t.offsetHeight||(e.scrollTop=t.clientHeight+(t.offsetTop-t.offsetHeight)),s.bottom>i.top+t.offsetHeight||(e.scrollTop=t.clientHeight+(t.offsetTop-t.offsetHeight)-(e.offsetHeight-(t.offsetHeight+(t.offsetHeight-t.clientHeight))))}function _showNoData2(e){return e?'<p class="multiselect__options--no-data">'.concat(_classPrivateFieldGet(this,_noData),"</p>"):""}function _showNoResults2(e){var t=_classPrivateFieldGet(this,_multiselect).querySelector(".multiselect__options--no-results");if(e){var s='<p class="multiselect__options--no-results">'.concat(_classPrivateFieldGet(this,_noResults),"</p>");!t&&_classPrivateFieldGet(this,_domElements).optionsContainerList.insertAdjacentHTML("beforeend",s)}else t&&t.parentNode&&t.parentNode.removeChild(t)}